<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Başvurular - KOÜ Bilgi Sistemi</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
  </head>
  <body class="sb-nav-fixed">
    <!-- Navbar -->
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
      <a class="navbar-brand ps-3" href="index.html">KOÜ Admin Paneli</a>
      <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!">
        <i class="fas fa-bars"></i>
      </button>
      <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-user fa-fw"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="#!">Ayarlar</a></li>
            <li><a class="dropdown-item" href="#!">Activity Log</a></li>
            <li><hr class="dropdown-divider" /></li>
            <li><a class="dropdown-item" href="#!">Çıkış</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <!-- Layout -->
    <div id="layoutSidenav">
      <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
          <div class="sb-sidenav-menu">
          </div>
          <div class="sb-sidenav-footer">
            <div class="small">Giriş Yapıldı:</div>
            Admin A
          </div>
        </nav>
      </div>
      <div id="layoutSidenav_content">
        <main>
          <div class="container-fluid px-4">
            <h1 class="mt-4">Başvurular</h1>
            
            <!-- Başvuranlar tablosu -->
            <div class="card mb-4">
              <div class="card-header">
                <i class="fas fa-table me-1"></i> Başvuranlar
              </div>
              <div class="card-body">
                <table id="datatablesDetail" class="table">
                  <thead>
                    <tr>
                      <th>Ad</th>
                      <th>Soyad</th>
                      <th>TC</th>
                      <th>Ünvan</th>
                      <th>PDF</th>
                      <th>İşlemler</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Ahmet</td>
                      <td>Yılmaz</td>
                      <td>12345678901</td>
                      <td>Profesör</td>
                      <td><a href="belge1.pdf" target="_blank">Belge.pdf</a></td>
                      <td>
                        <!-- 4 buton: Detay, Jüri Değerlendirme, Onay, Ret -->
                        <button class="btn btn-primary btn-sm detail-btn">Detay</button>
                        <button class="btn btn-info btn-sm jury-eval-btn" data-bs-toggle="modal" data-bs-target="#juryEvaluationModal">Jüri Değerlendirme</button>
                        <button class="btn btn-success btn-sm onay-btn">Onay</button>
                        <button class="btn btn-danger btn-sm ret-btn">Ret</button>
                      </td>
                    </tr>
                    <tr>
                      <td>Ayşe</td>
                      <td>Kara</td>
                      <td>98765432109</td>
                      <td>Doçent</td>
                      <td><a href="belge2.pdf" target="_blank">Belge.pdf</a></td>
                      <td>
                        <button class="btn btn-primary btn-sm detail-btn">Detay</button>
                        <button class="btn btn-info btn-sm jury-eval-btn" data-bs-toggle="modal" data-bs-target="#juryEvaluationModal">Jüri Değerlendirme</button>
                        <button class="btn btn-success btn-sm onay-btn">Onay</button>
                        <button class="btn btn-danger btn-sm ret-btn">Ret</button>
                      </td>
                    </tr>
                    <!-- Diğer satırlar... -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </main>
        <footer class="py-4 bg-light mt-auto">
          <div class="container-fluid px-4">
            <div class="d-flex align-items-center justify-content-between small">
              <div class="text-muted">Bu web sitesinin hakları Necibe Güner'e aittir.</div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    
    <!-- Modal: Jüri Değerlendirme Formu (Aynı sayfa üzerinde açılır pencere) -->
    <div class="modal fade" id="juryEvaluationModal" tabindex="-1" aria-labelledby="juryEvaluationModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="juryEvaluationModalLabel">Jüri Değerlendirme Formu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
          </div>
          <div class="modal-body">
            <form id="juryEvaluationForm">
              <div class="mb-3">
                <label for="juryName" class="form-label">Jüri Adı</label>
                <input type="text" class="form-control" id="juryName" name="juryName" required />
              </div>
              <div class="mb-3">
                <label for="jurySurname" class="form-label">Jüri Soyadı</label>
                <input type="text" class="form-control" id="jurySurname" name="jurySurname" required />
              </div>
              <div class="mb-3">
                <label for="juryTC" class="form-label">TC Kimlik No</label>
                <input type="text" class="form-control" id="juryTC" name="juryTC" required />
              </div>
              <div class="mb-3">
                <label for="juryTitle" class="form-label">Ünvan</label>
                <input type="text" class="form-control" id="juryTitle" name="juryTitle" required />
              </div>
              <div class="mb-3">
                <label for="juryReport" class="form-label">Değerlendirme Raporu (PDF)</label>
                <input type="file" class="form-control" id="juryReport" name="juryReport" accept="application/pdf" required />
              </div>
              <button type="submit" class="btn btn-primary">Formu Gönder</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
          </div>
        </div>
      </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
    <script src="js/datatables-simple-demo.js"></script>
    <script>
      // Detay butonuna tıklanınca yeni pencere açma işlemi
      document.querySelectorAll(".detail-btn").forEach(button => {
        button.addEventListener("click", function () {
          window.open('detailApplication.html', '_blank', 'width=800,height=600');
        });
      });
      // Örnek Onay ve Ret butonları (başvuru için)
      document.querySelectorAll(".onay-btn").forEach(button => {
        button.addEventListener("click", function () {
          alert("Başvuru onaylandı.");
        });
      });
      document.querySelectorAll(".ret-btn").forEach(button => {
        button.addEventListener("click", function () {
          alert("Başvuru reddedildi.");
        });
      });
      
      // Jüri Değerlendirme Formu işlemi
      document.getElementById("juryEvaluationForm").addEventListener("submit", function(event) {
        event.preventDefault();
        const juryName = document.getElementById("juryName").value;
        const jurySurname = document.getElementById("jurySurname").value;
        const juryTC = document.getElementById("juryTC").value;
        const juryTitle = document.getElementById("juryTitle").value;
        const juryReport = document.getElementById("juryReport").files[0];
        
        // Örnek: Form verilerini alert ile gösterelim.
        alert("Jüri değerlendirme formu gönderildi:\n" +
              "Ad: " + juryName + "\n" +
              "Soyad: " + jurySurname + "\n" +
              "TC: " + juryTC + "\n" +
              "Ünvan: " + juryTitle + "\n" +
              "Rapor: " + (juryReport ? juryReport.name : "Yok"));
        
        // İsteğe bağlı: Form gönderildikten sonra modalı kapatmak için
        var modalEl = document.getElementById('juryEvaluationModal');
        var modal = bootstrap.Modal.getInstance(modalEl);
        modal.hide();
      });
    </script>
  </body>
</html>
